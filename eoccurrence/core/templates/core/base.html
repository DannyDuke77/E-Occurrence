<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <title>{% block title %}{% endblock %} | E-Occurrence</title>
    <style type="text/tailwindcss">
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
                 Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 
                 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        }
      @theme {
        --color-clifford: #da373d;
      }
    </style>
  </head>
  <body>
    <div class="flex">
      <aside id="sidebar" class="w-64 bg-gray-800 text-white h-screen fixed flex flex-col overflow-hidden p-4 z-50 border-r-4 border-gray-600">
        <div class="flex-shrink-0">
        <!-- Logo and title -->
          <div class="flex justify-between items-center border-b border-gray-700 pb-2">
            <a href="/" class="text-2xl font-bold text-white flex items-center space-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                <path d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z" />
                <path d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z" />
              </svg>
              <p class="">e-Occurrence</p></a>
          </div>

          <nav class="space-y-2 mt-4">
            <!-- Links visible to everyone -->
            <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">Search</a>

            <!-- Police links (admins also see these) -->
            {% if user.is_authenticated and user.profile.user_role == 'police' or user.profile.user_role == 'admin' %}
                <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">Dashboard</a>
                <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">New Entry</a>
                <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">Bail Decisions</a>
            {% endif %}

            <!-- Court links (admins also see these) -->
            {% if user.is_authenticated and user.profile.user_role == 'court' or user.profile.user_role == 'admin' %}
                <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">Court Updates</a>
                <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">Reports</a>
                <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">Help</a>
            {% endif %}

            <!-- Admin-only links -->
            {% if user.is_authenticated and user.profile.user_role == 'admin' %}
                <a href="#" class="block px-4 py-2 rounded hover:bg-gray-700">Admin Dashboard</a>
                <a href="{% url 'accounts:create_user' %}" class="block px-4 py-2 rounded hover:bg-gray-700">Add User</a>
            {% endif %}
    
            <a href="{% url 'core:terms_of_use' %}" class="block px-4 py-2 rounded hover:bg-gray-700">Terms of Use</a>
          </nav>

        </div>

      <!-- Logout button to appear at the bottom of the sidebar -->
        <div class="mt-auto border-t border-gray-700 pt-4">
          {% if user.is_authenticated %}
              <p class="text-sm mb-2 text-gray-300">Logged in as: <span class="font-bold text-white">{% firstof user.get_full_name user.username %}</span></p>
              <p class="text-sm mb-4 text-gray-300">Role: <span class="font-bold text-white">{{ user.profile.user_role }}</span></p>

              <div class="text-center">
                <a href="{% url 'accounts:logout' %}" class="block px-4 py-2 bg-red-600 rounded hover:bg-red-700">Logout</a>
              </div>
          {% else %}
              <p class="text-sm mb-2 text-gray-400">You are not logged in.</p>

              <div class="text-center">
                <a href="{% url 'accounts:login' %}" class="block px-4 py-2 text-center bg-blue-600 rounded hover:bg-blue-700">Login</a>
              </div>
          {% endif %}
        </div>
      </aside>

      <div class="flex-1 ml-64 flex flex-col min-h-screen">
        <main class="flex-1 overflow-y-auto p-4">
        {% block content %}
        
        {% endblock %}
        </main>

        <footer class="bg-gray-800 text-gray-300 py-6 mt-10">
          <div class="max-w-7xl mx-auto px-6 text-center space-y-2">
            <p>&copy; 2025 e-Occurrence System</p>
            <p>Contact: info@eoccurrence.ke | Terms & Privacy Policy</p>
          </div>
        </footer>
      </div>
    </div>
    
  </body>
</html>